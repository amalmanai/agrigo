<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<BorderPane
        maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308"
        prefHeight="720.0" prefWidth="1200.0"
        style="-fx-background-color: #f0f4f0;"
        xmlns="http://javafx.com/javafx/21"
        xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="Controllers.MainGuiAdminController">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SIDEBAR GAUCHE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <left>
        <VBox fx:id="MainLeftSidebar"
              alignment="TOP_CENTER"
              prefWidth="260.0"
              maxHeight="1.7976931348623157E308"
              style="-fx-background-color: linear-gradient(to bottom, #1a5c1a, #228B22);
                     -fx-background-radius: 0 20 20 0;"
              BorderPane.alignment="CENTER">
            <padding><Insets top="32" left="20" right="20" bottom="32"/></padding>

            <!-- Logo + Brand -->
            <VBox alignment="CENTER" spacing="4">
                <ImageView fitHeight="80.0" fitWidth="110.0" pickOnBounds="true" preserveRatio="true">
                    <image><Image url="@assets/logoo.png" /></image>
                </ImageView>
                <Label text="AgriGo"
                       style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;" />
                <Label text="Administration"
                       style="-fx-text-fill: rgba(255,255,255,0.55); -fx-font-size: 11px;" />
            </VBox>

            <!-- Divider -->
            <Pane prefHeight="1.0" prefWidth="200.0"
                  style="-fx-background-color: rgba(255,255,255,0.15);"
                  maxWidth="1.7976931348623157E308">
                <VBox.margin><Insets top="24" bottom="24"/></VBox.margin>
            </Pane>

            <!-- Navigation label -->
            <Label text="NAVIGATION"
                   style="-fx-text-fill: rgba(255,255,255,0.40);
                          -fx-font-size: 10px;
                          -fx-font-weight: bold;
                          -fx-padding: 0 0 10 8;" />

            <!-- Bouton Gestion User -->
            <Button fx:id="todashboard"
                    mnemonicParsing="false" onAction="#todashboard"
                    prefHeight="52.0" prefWidth="220.0"
                    text="ðŸ‘¥  Gestion Utilisateurs"
                    style="-fx-background-color: rgba(255,255,255,0.12);
                           -fx-background-radius: 12;
                           -fx-text-fill: white;
                           -fx-font-size: 14px;
                           -fx-font-weight: 500;
                           -fx-alignment: CENTER_LEFT;
                           -fx-padding: 0 0 0 18;
                           -fx-cursor: hand;
                           -fx-border-color: rgba(255,255,255,0.18);
                           -fx-border-radius: 12;
                           -fx-border-width: 1;">
                <VBox.margin><Insets top="6" bottom="6"/></VBox.margin>
            </Button>

            <!-- Bouton Gestion TÃ¢che -->
            <Button fx:id="BtnGestionTache"
                    mnemonicParsing="false" onAction="#BtnGestionTache"
                    prefHeight="52.0" prefWidth="220.0"
                    text="ðŸ“‹  Gestion TÃ¢ches"
                    style="-fx-background-color: rgba(255,255,255,0.12);
                           -fx-background-radius: 12;
                           -fx-text-fill: white;
                           -fx-font-size: 14px;
                           -fx-font-weight: 500;
                           -fx-alignment: CENTER_LEFT;
                           -fx-padding: 0 0 0 18;
                           -fx-cursor: hand;
                           -fx-border-color: rgba(255,255,255,0.18);
                           -fx-border-radius: 12;
                           -fx-border-width: 1;">
                <VBox.margin><Insets top="6" bottom="6"/></VBox.margin>
            </Button>

            <!-- Bouton Statistiques -->
            <Button fx:id="btnStats"
                    mnemonicParsing="false" onAction="#openStats"
                    prefHeight="52.0" prefWidth="220.0"
                    text="ðŸ“Š  Statistiques"
                    style="-fx-background-color: rgba(255,255,255,0.12);
                           -fx-background-radius: 12;
                           -fx-text-fill: white;
                           -fx-font-size: 14px;
                           -fx-font-weight: 500;
                           -fx-alignment: CENTER_LEFT;
                           -fx-padding: 0 0 0 18;
                           -fx-cursor: hand;
                           -fx-border-color: rgba(255,255,255,0.18);
                           -fx-border-radius: 12;
                           -fx-border-width: 1;">
                <VBox.margin><Insets top="6" bottom="6"/></VBox.margin>
            </Button>

            <!-- Spacer -->
            <Region VBox.vgrow="ALWAYS" />

            <!-- Divider bas -->
            <Pane prefHeight="1.0"
                  style="-fx-background-color: rgba(255,255,255,0.15);"
                  maxWidth="1.7976931348623157E308">
                <VBox.margin><Insets top="0" bottom="16"/></VBox.margin>
            </Pane>

            <!-- Version tag -->
            <Label text="AgriGo v2.0  â€¢  Admin"
                   style="-fx-text-fill: rgba(255,255,255,0.30); -fx-font-size: 10.5px;"
                   alignment="CENTER" maxWidth="1.7976931348623157E308" />
        </VBox>
    </left>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         ZONE CENTRALE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <center>
        <BorderPane fx:id="SecondBorderPane"
                    maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308"
                    style="-fx-background-color: transparent;"
                    BorderPane.alignment="CENTER">
            <padding><Insets top="24" left="24" right="24" bottom="24"/></padding>

            <!-- â”€â”€ TOPBAR â”€â”€ -->
            <top>
                <HBox alignment="CENTER_LEFT" spacing="0"
                      prefHeight="64.0"
                      style="-fx-background-color: white;
                             -fx-background-radius: 16;
                             -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 12, 0, 0, 3);">
                    <padding><Insets top="0" left="24" right="16" bottom="0"/></padding>

                    <!-- Titre page -->
                    <VBox alignment="CENTER_LEFT" spacing="2">
                        <Label text="Tableau de bord"
                               style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #1a1a1a;" />
                        <Label text="Bienvenue, Administrateur"
                               style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                    </VBox>

                    <!-- Spacer -->
                    <Region HBox.hgrow="ALWAYS" />

                    <!-- Notification badge -->
                    <StackPane alignment="TOP_RIGHT">
                        <Button text="ðŸ””"
                                style="-fx-background-color: #f0f4f0;
                                       -fx-background-radius: 10;
                                       -fx-font-size: 16px;
                                       -fx-cursor: hand;
                                       -fx-pref-width: 40; -fx-pref-height: 40;
                                       -fx-border-color: #e5e7eb;
                                       -fx-border-radius: 10;
                                       -fx-border-width: 1;" />
                        <Label text="3"
                               style="-fx-background-color: #c0392b;
                                      -fx-background-radius: 8;
                                      -fx-text-fill: white;
                                      -fx-font-size: 9px;
                                      -fx-font-weight: bold;
                                      -fx-padding: 1 4 1 4;"
                               StackPane.alignment="TOP_RIGHT"
                               translateX="4" translateY="-4" />
                    </StackPane>

                    <!-- Bouton chatbot AGRIGO -->
                    <Button text="ðŸ’¬ Aide AGRIGO"
                            onAction="#openChatbot"
                            prefHeight="36.0"
                            style="-fx-background-color: white;
                                   -fx-background-radius: 10;
                                   -fx-text-fill: #228B22;
                                   -fx-font-size: 12px;
                                   -fx-font-weight: 600;
                                   -fx-cursor: hand;
                                   -fx-border-color: #c8dcc5;
                                   -fx-border-radius: 10;
                                   -fx-border-width: 1;">
                        <HBox.margin><Insets left="12"/></HBox.margin>
                    </Button>

                    <!-- SÃ©parateur vertical -->
                    <Pane prefWidth="1.0" prefHeight="36.0"
                          style="-fx-background-color: #e5e7eb;">
                        <HBox.margin><Insets left="12" right="12"/></HBox.margin>
                    </Pane>

                    <!-- Profil menu -->
                    <MenuButton fx:id="btnProfil"
                                mnemonicParsing="false"
                                text="  Admin"
                                style="-fx-background-color: #f0f4f0;
                                       -fx-background-radius: 20;
                                       -fx-text-fill: #1a1a1a;
                                       -fx-font-size: 13px;
                                       -fx-font-weight: 500;
                                       -fx-cursor: hand;
                                       -fx-border-color: #e5e7eb;
                                       -fx-border-radius: 20;
                                       -fx-border-width: 1;
                                       -fx-padding: 6 14 6 8;">
                        <graphic>
                            <ImageView fitHeight="28.0" fitWidth="28.0" pickOnBounds="true" preserveRatio="true">
                                <image><Image url="@assets/user.png" /></image>
                            </ImageView>
                        </graphic>
                        <items>
                            <MenuItem mnemonicParsing="false" onAction="#openMesTaches" text="ðŸ“‹  Mes tÃ¢ches" />
                            <MenuItem mnemonicParsing="false" onAction="#openMonProfil" text="ðŸ‘¤  Mon profil" />
                        </items>
                    </MenuButton>

                    <!-- Bouton dÃ©connexion -->
                    <Button fx:id="logout"
                            mnemonicParsing="false" onAction="#logout"
                            prefHeight="38.0" prefWidth="130.0"
                            text="âŽ‹  DÃ©connexion"
                            style="-fx-background-color: #fff0f0;
                                   -fx-background-radius: 10;
                                   -fx-text-fill: #c0392b;
                                   -fx-font-size: 13px;
                                   -fx-font-weight: 600;
                                   -fx-cursor: hand;
                                   -fx-border-color: #fecaca;
                                   -fx-border-radius: 10;
                                   -fx-border-width: 1;">
                        <HBox.margin><Insets left="10"/></HBox.margin>
                    </Button>
                </HBox>
            </top>

            <!-- â”€â”€ CONTENU PRINCIPAL â”€â”€ -->
            <center>
                <BorderPane fx:id="MainAnchorPaneBaladity"
                            style="-fx-background-color: transparent;"
                            BorderPane.alignment="CENTER">

                    <!-- Cartes de statistiques rapides -->
                    <top>
                        <HBox spacing="16" alignment="CENTER">
                            <BorderPane.margin><Insets top="24" bottom="16"/></BorderPane.margin>

                            <!-- Carte 1 -->
                            <VBox alignment="TOP_LEFT" prefWidth="220.0" prefHeight="110.0" spacing="8"
                                  style="-fx-background-color: white;
                                         -fx-background-radius: 16;
                                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                <padding><Insets top="20" left="20" right="20" bottom="20"/></padding>
                                <Label text="ðŸ‘¥  Utilisateurs"
                                       style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                                <Label text="248"
                                       style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #228B22;" />
                                <Label text="â–² +12 ce mois"
                                       style="-fx-font-size: 11px; -fx-text-fill: #16a34a;" />
                            </VBox>

                            <!-- Carte 2 -->
                            <VBox alignment="TOP_LEFT" prefWidth="220.0" prefHeight="110.0" spacing="8"
                                  style="-fx-background-color: white;
                                         -fx-background-radius: 16;
                                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                <padding><Insets top="20" left="20" right="20" bottom="20"/></padding>
                                <Label text="ðŸ“‹  TÃ¢ches actives"
                                       style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                                <Label text="57"
                                       style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #228B22;" />
                                <Label text="â–² +5 cette semaine"
                                       style="-fx-font-size: 11px; -fx-text-fill: #16a34a;" />
                            </VBox>

                            <!-- Carte 3 -->
                            <VBox alignment="TOP_LEFT" prefWidth="220.0" prefHeight="110.0" spacing="8"
                                  style="-fx-background-color: white;
                                         -fx-background-radius: 16;
                                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                <padding><Insets top="20" left="20" right="20" bottom="20"/></padding>
                                <Label text="ðŸ“Š  Taux d'achÃ¨vement"
                                       style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                                <Label text="84%"
                                       style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #228B22;" />
                                <Label text="â–² +3% vs mois dernier"
                                       style="-fx-font-size: 11px; -fx-text-fill: #16a34a;" />
                            </VBox>
                        </HBox>
                    </top>

                    <!-- Zone de contenu dynamique (chargÃ©e par le controller) -->
                    <center>
                        <VBox alignment="CENTER" spacing="12"
                              style="-fx-background-color: white;
                                     -fx-background-radius: 16;
                                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">

                            <!-- Illustration / message d'accueil -->
                            <Label text="ðŸŒ¿"
                                   style="-fx-font-size: 56px;" />
                            <Label text="Bienvenue sur AgriGo"
                                   style="-fx-font-size: 28px;
                                          -fx-font-weight: bold;
                                          -fx-text-fill: #228B22;" />
                            <Label text="SÃ©lectionnez une section dans le menu pour commencer."
                                   style="-fx-font-size: 14px;
                                          -fx-text-fill: #6b7280;" />

                            <!-- Boutons d'action rapide -->
                            <HBox alignment="CENTER" spacing="14">
                                <VBox.margin><Insets top="16"/></VBox.margin>
                                <Button text="ðŸ‘¥  GÃ©rer les utilisateurs"
                                        onAction="#todashboard"
                                        prefHeight="44" prefWidth="200"
                                        style="-fx-background-color: #228B22;
                                               -fx-background-radius: 12;
                                               -fx-text-fill: white;
                                               -fx-font-size: 13px;
                                               -fx-font-weight: 600;
                                               -fx-cursor: hand;
                                               -fx-effect: dropshadow(gaussian, rgba(34,139,34,0.35), 10, 0, 0, 4);" />
                                <Button text="ðŸ“‹  Voir les tÃ¢ches"
                                        onAction="#BtnGestionTache"
                                        prefHeight="44" prefWidth="180"
                                        style="-fx-background-color: white;
                                               -fx-background-radius: 12;
                                               -fx-text-fill: #228B22;
                                               -fx-font-size: 13px;
                                               -fx-font-weight: 600;
                                               -fx-cursor: hand;
                                               -fx-border-color: #228B22;
                                               -fx-border-radius: 12;
                                               -fx-border-width: 1.5;" />
                            </HBox>
                        </VBox>
                    </center>
                </BorderPane>
            </center>
        </BorderPane>
    </center>
</BorderPane>