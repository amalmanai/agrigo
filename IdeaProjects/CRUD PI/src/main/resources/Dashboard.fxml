<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<AnchorPane
        prefHeight="660.0" prefWidth="1000.0"
        style="-fx-background-color: #f0f4f0;"
        xmlns="http://javafx.com/javafx/21"
        xmlns:fx="http://javafx.com/fxml/1"
        fx:controller="Controllers.ShowUserController">

    <children>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TOPBAR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox layoutX="0.0" layoutY="0.0"
              prefWidth="1000.0" prefHeight="64.0"
              alignment="CENTER_LEFT"
              style="-fx-background-color: white;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
            <padding><Insets top="0" left="24" right="24" bottom="0"/></padding>

            <!-- Bouton retour -->
            <Button fx:id="btnRetour"
                    mnemonicParsing="false" onAction="#retourAccueil"
                    prefHeight="36.0" prefWidth="110.0"
                    text="â† Retour"
                    style="-fx-background-color: #f0f4f0;
                           -fx-background-radius: 10;
                           -fx-text-fill: #228B22;
                           -fx-font-size: 13px;
                           -fx-font-weight: 600;
                           -fx-cursor: hand;
                           -fx-border-color: #228B22;
                           -fx-border-radius: 10;
                           -fx-border-width: 1.5;" />

            <!-- Titre + sous-titre -->
            <VBox alignment="CENTER_LEFT" spacing="2">
                <HBox.margin><Insets left="20"/></HBox.margin>
                <Label text="Gestion des Utilisateurs"
                       style="-fx-font-size: 18px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #1a1a1a;" />
                <Label text="Consultez, exportez et gÃ©rez tous les comptes"
                       style="-fx-font-size: 11px; -fx-text-fill: #9ca3af;" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <!-- Badge live -->
            <HBox alignment="CENTER" spacing="6"
                  style="-fx-background-color: #ecfdf5;
                         -fx-background-radius: 20;
                         -fx-border-color: #6ee7b7;
                         -fx-border-radius: 20;
                         -fx-border-width: 1;">
                <padding><Insets top="6" left="14" right="14" bottom="6"/></padding>
                <Pane prefWidth="8" prefHeight="8"
                      style="-fx-background-color: #16a34a;
                             -fx-background-radius: 4;" />
                <Label text="En direct"
                       style="-fx-font-size: 12px;
                              -fx-font-weight: 600;
                              -fx-text-fill: #16a34a;" />
            </HBox>

            <!-- SÃ©parateur vertical -->
            <Pane prefWidth="1.0" prefHeight="36.0"
                  style="-fx-background-color: #e5e7eb;">
                <HBox.margin><Insets left="16" right="16"/></HBox.margin>
            </Pane>

            <!-- Bouton dÃ©connexion -->
            <Button fx:id="logoutshow"
                    mnemonicParsing="false" onAction="#logoutshow"
                    prefHeight="36.0" prefWidth="120.0"
                    text="âŽ‹  DÃ©connexion"
                    style="-fx-background-color: #fff0f0;
                           -fx-background-radius: 10;
                           -fx-text-fill: #c0392b;
                           -fx-font-size: 13px;
                           -fx-font-weight: 600;
                           -fx-cursor: hand;
                           -fx-border-color: #fecaca;
                           -fx-border-radius: 10;
                           -fx-border-width: 1;" />
        </HBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             CARTES KPI
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox layoutX="24.0" layoutY="84.0"
              spacing="16" prefWidth="952.0">

            <!-- Total utilisateurs -->
            <VBox alignment="TOP_LEFT" spacing="8"
                  prefWidth="222.0" prefHeight="100.0"
                  style="-fx-background-color: white;
                         -fx-background-radius: 16;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                <padding><Insets top="16" left="18" right="18" bottom="16"/></padding>
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <StackPane prefWidth="36" prefHeight="36"
                               style="-fx-background-color: #ecfdf5;
                                      -fx-background-radius: 10;">
                        <Label text="ðŸ‘¥" style="-fx-font-size: 16px;" />
                    </StackPane>
                    <Label text="Total utilisateurs"
                           style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                </HBox>
                <Label fx:id="labelTotalUsers" text="â€”"
                       style="-fx-font-size: 28px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #228B22;" />
            </VBox>

            <!-- Admins -->
            <VBox alignment="TOP_LEFT" spacing="8"
                  prefWidth="222.0" prefHeight="100.0"
                  style="-fx-background-color: white;
                         -fx-background-radius: 16;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                <padding><Insets top="16" left="18" right="18" bottom="16"/></padding>
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <StackPane prefWidth="36" prefHeight="36"
                               style="-fx-background-color: #eff6ff;
                                      -fx-background-radius: 10;">
                        <Label text="ðŸ›¡" style="-fx-font-size: 16px;" />
                    </StackPane>
                    <Label text="Administrateurs"
                           style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                </HBox>
                <Label fx:id="labelTotalAdmins" text="â€”"
                       style="-fx-font-size: 28px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #1976D2;" />
            </VBox>

            <!-- Ouvriers -->
            <VBox alignment="TOP_LEFT" spacing="8"
                  prefWidth="222.0" prefHeight="100.0"
                  style="-fx-background-color: white;
                         -fx-background-radius: 16;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                <padding><Insets top="16" left="18" right="18" bottom="16"/></padding>
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <StackPane prefWidth="36" prefHeight="36"
                               style="-fx-background-color: #fff7ed;
                                      -fx-background-radius: 10;">
                        <Label text="ðŸ‘·" style="-fx-font-size: 16px;" />
                    </StackPane>
                    <Label text="Ouvriers agricoles"
                           style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                </HBox>
                <Label fx:id="labelTotalOuvriers" text="â€”"
                       style="-fx-font-size: 28px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #d97706;" />
            </VBox>

            <!-- SÃ©lectionnÃ©s -->
            <VBox alignment="TOP_LEFT" spacing="8"
                  prefWidth="222.0" prefHeight="100.0"
                  style="-fx-background-color: white;
                         -fx-background-radius: 16;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                <padding><Insets top="16" left="18" right="18" bottom="16"/></padding>
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <StackPane prefWidth="36" prefHeight="36"
                               style="-fx-background-color: #f3e8ff;
                                      -fx-background-radius: 10;">
                        <Label text="â˜‘ï¸" style="-fx-font-size: 16px;" />
                    </StackPane>
                    <Label text="SÃ©lectionnÃ©s"
                           style="-fx-font-size: 12px; -fx-text-fill: #6b7280;" />
                </HBox>
                <Label fx:id="labelSelectionnes" text="0"
                       style="-fx-font-size: 28px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #7c3aed;" />
            </VBox>

        </HBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             BARRE RECHERCHE + ACTIONS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox layoutX="24.0" layoutY="208.0"
              spacing="12" alignment="CENTER_LEFT"
              prefWidth="952.0">

            <!-- Champ recherche -->
            <StackPane prefWidth="320.0" prefHeight="42.0">
                <Label text="ðŸ”"
                       style="-fx-font-size: 14px; -fx-text-fill: #9ca3af;"
                       StackPane.alignment="CENTER_LEFT">
                    <padding><Insets left="14"/></padding>
                </Label>
                <TextField fx:id="fieldRechercheUser"
                           promptText="Rechercher par nom, email, rÃ´le..."
                           style="-fx-background-color: white;
                                  -fx-background-radius: 12;
                                  -fx-border-color: #d1d5db;
                                  -fx-border-radius: 12;
                                  -fx-border-width: 1.5;
                                  -fx-padding: 0 14 0 38;
                                  -fx-font-size: 13px;
                                  -fx-pref-height: 42;" />
            </StackPane>

            <!-- RafraÃ®chir -->
            <Button fx:id="btnRafraichir"
                    mnemonicParsing="false" onAction="#rafraichir"
                    prefHeight="42.0" prefWidth="130.0"
                    text="â†»  RafraÃ®chir"
                    style="-fx-background-color: white;
                           -fx-background-radius: 12;
                           -fx-text-fill: #228B22;
                           -fx-font-size: 13px;
                           -fx-font-weight: 500;
                           -fx-cursor: hand;
                           -fx-border-color: #228B22;
                           -fx-border-radius: 12;
                           -fx-border-width: 1.5;" />

            <Region HBox.hgrow="ALWAYS" />

            <!-- Import API -->
            <Button fx:id="btnImportDemo"
                    mnemonicParsing="false" onAction="#importDemoUser"
                    prefHeight="42.0" prefWidth="200.0"
                    text="ðŸŒ  Importer via API"
                    style="-fx-background-color: white;
                           -fx-background-radius: 12;
                           -fx-text-fill: #1976D2;
                           -fx-font-size: 13px;
                           -fx-font-weight: 500;
                           -fx-cursor: hand;
                           -fx-border-color: #1976D2;
                           -fx-border-radius: 12;
                           -fx-border-width: 1.5;" />

            <!-- Export PDF -->
            <Button fx:id="btnExportPdf"
                    mnemonicParsing="false" onAction="#exportPdf"
                    prefHeight="42.0" prefWidth="200.0"
                    text="ðŸ“„  Exporter en PDF"
                    style="-fx-background-color: #228B22;
                           -fx-background-radius: 12;
                           -fx-text-fill: white;
                           -fx-font-size: 13px;
                           -fx-font-weight: 600;
                           -fx-cursor: hand;
                           -fx-effect: dropshadow(gaussian, rgba(34,139,34,0.32), 10, 0, 0, 3);">
                <tooltip>
                    <Tooltip text="SÃ©lectionnez un ou plusieurs utilisateurs puis cliquez pour exporter" />
                </tooltip>
            </Button>
        </HBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             TABLEAU
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <VBox layoutX="24.0" layoutY="266.0"
              prefWidth="952.0" prefHeight="338.0"
              style="-fx-background-color: white;
                     -fx-background-radius: 16;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">

            <!-- En-tÃªte tableau -->
            <HBox alignment="CENTER_LEFT" prefHeight="46.0"
                  style="-fx-background-color: #f8faf8;
                         -fx-background-radius: 16 16 0 0;
                         -fx-border-color: transparent transparent #f3f4f6 transparent;
                         -fx-border-width: 0 0 1 0;">
                <padding><Insets top="0" left="22" right="22" bottom="0"/></padding>
                <Label text="ðŸ‘¥  Liste des utilisateurs"
                       style="-fx-font-size: 13px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #1a1a1a;" />
                <Region HBox.hgrow="ALWAYS" />
                <Label text="Cliquez sur une ligne pour sÃ©lectionner  â€¢  Double-clic pour modifier"
                       style="-fx-font-size: 11px; -fx-text-fill: #9ca3af;" />
            </HBox>

            <!-- TableView -->
            <TableView fx:id="tableViewUserRegister"
                       prefHeight="252.0" prefWidth="952.0"
                       style="-fx-background-color: transparent;
                              -fx-background-radius: 0 0 16 16;
                              -fx-border-color: transparent;"
                       VBox.vgrow="ALWAYS" />

            <!-- Message vide -->
            <Label fx:id="labelAucunUser"
                   text="Aucun utilisateur trouvÃ©. Cliquez sur Â« Importer via API Â» pour ajouter des donnÃ©es de dÃ©monstration."
                   style="-fx-font-size: 13px; -fx-text-fill: #9ca3af;"
                   wrapText="true" prefWidth="700"
                   visible="false" />
        </VBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             PIED DE PAGE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox layoutX="0.0" layoutY="616.0"
              prefWidth="1000.0" prefHeight="44.0"
              alignment="CENTER_LEFT"
              style="-fx-background-color: white;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.04), 6, 0, -2, 0);">
            <padding><Insets top="0" left="24" right="24" bottom="0"/></padding>
            <Label text="AgriGo  â€¢  Gestion des Utilisateurs"
                   style="-fx-font-size: 11.5px; -fx-text-fill: #9ca3af;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label text="SÃ©lectionnez des utilisateurs avant d'exporter"
                   style="-fx-font-size: 11px; -fx-text-fill: #d97706;" />
        </HBox>

    </children>
</AnchorPane>