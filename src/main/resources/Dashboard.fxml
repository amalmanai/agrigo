<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controlles.DashboardController" spacing="24" styleClass="dashboard-root">
   <padding><Insets top="24" right="24" bottom="24" left="24" /></padding>

   <!-- Header: titre + sous-titre + recherche -->
   <HBox alignment="CENTER_LEFT" spacing="16">
      <VBox spacing="2">
         <Label text="Dashboard" styleClass="dashboard-title" />
         <Label text="Suivi et pilotage des opÃ©rations d'irrigation..." styleClass="dashboard-subtitle" />
      </VBox>
      <HBox HBox.hgrow="ALWAYS" />
      <TextField fx:id="searchField" promptText="Rechercher..." styleClass="search-bar" prefWidth="260" />
   </HBox>

   <!-- 3 cartes KPI -->
   <HBox spacing="20">
      <VBox fx:id="cardIrrigations" styleClass="card-metric" HBox.hgrow="ALWAYS">
         <padding><Insets top="20" right="20" bottom="20" left="20" /></padding>
         <HBox spacing="8" alignment="CENTER_LEFT">
            <Label text="ðŸ“Š" style="-fx-font-size: 24px;" />
            <Label text="IRRIGATIONS CE MOIS" styleClass="card-metric-label" />
         </HBox>
         <Label fx:id="labelIrrigations" text="0" styleClass="card-metric-value" />
         <Label fx:id="labelIrrigationsTrend" text="â€”" styleClass="card-metric-trend" />
      </VBox>
      <VBox fx:id="cardVolume" styleClass="card-metric" HBox.hgrow="ALWAYS">
         <padding><Insets top="20" right="20" bottom="20" left="20" /></padding>
         <HBox spacing="8" alignment="CENTER_LEFT">
            <Label text="ðŸ’§" style="-fx-font-size: 24px;" />
            <Label text="VOLUME EAU TOTAL (L)" styleClass="card-metric-label" />
         </HBox>
         <Label fx:id="labelVolume" text="0" styleClass="card-metric-value" />
         <Label fx:id="labelVolumeStatus" text="Stable" styleClass="card-metric-trend" />
      </VBox>
      <VBox fx:id="cardSystemes" styleClass="card-metric" HBox.hgrow="ALWAYS">
         <padding><Insets top="20" right="20" bottom="20" left="20" /></padding>
         <HBox spacing="8" alignment="CENTER_LEFT">
            <Label text="ðŸŒ±" style="-fx-font-size: 24px;" />
            <Label text="SYSTÃˆMES ACTIFS" styleClass="card-metric-label" />
         </HBox>
         <Label fx:id="labelSystemes" text="0" styleClass="card-metric-value" />
         <Label fx:id="labelSystemesDetail" text="â€”" styleClass="card-metric-trend" />
      </VBox>
   </HBox>

   <!-- Onglets (visuels seulement, le tableau affiche l'historique) -->
   <HBox spacing="0" styleClass="tabs-bar">
      <Button text="Historique" styleClass="tab-button active" onAction="#onTabHistorique" />
      <Button fx:id="tabSystemes" text="SystÃ¨mes" styleClass="tab-button" onAction="#onTabSystemes" />
   </HBox>

   <!-- Section Gestion + bouton Ajouter -->
   <HBox alignment="CENTER_LEFT" spacing="16">
      <Label text="Gestion de l'historique d'irrigation" styleClass="section-title" />
      <HBox HBox.hgrow="ALWAYS" />
      <Button fx:id="btnAjouter" text="+ Ajouter une irrigation" styleClass="btn-add" onAction="#handleAdd" />
   </HBox>

   <!-- Tableau avec colonnes + ACTIONS -->
   <VBox styleClass="card" VBox.vgrow="ALWAYS">
      <padding><Insets top="16" right="16" bottom="16" left="16" /></padding>
      <TableView fx:id="tvHistorique" VBox.vgrow="ALWAYS" styleClass="dashboard-table">
         <columns>
            <TableColumn fx:id="colDate" text="DATE" prefWidth="140" />
            <TableColumn fx:id="colSysteme" text="SYSTÃˆME" prefWidth="100" />
            <TableColumn fx:id="colDuree" text="DURÃ‰E (min)" prefWidth="90" />
            <TableColumn fx:id="colVolume" text="VOLUME (L)" prefWidth="90" />
            <TableColumn fx:id="colHumidite" text="HUMIDITÃ‰ %" prefWidth="100" />
            <TableColumn fx:id="colType" text="TYPE" prefWidth="100" />
            <TableColumn fx:id="colActions" text="ACTIONS" prefWidth="100" />
         </columns>
      </TableView>
   </VBox>
</VBox>
